{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/HABEEB SHOLANKE/Desktop/foodapp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/HABEEB SHOLANKE/Desktop/foodapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/HABEEB SHOLANKE/Desktop/foodapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useCallback}from\"react\";import classes from\"./AvailableMeal.module.css\";import MealItem from\"./MealItem\";import Card from\"../UI/Card\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AvailableMeal=function AvailableMeal(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),loadedMeals=_useState2[0],setLoadedMeals=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var fetchmealsHandler=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data,loaded,key;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsLoading(true);setError(null);_context.prev=2;_context.next=5;return fetch(\"https://foods-5725b-default-rtdb.firebaseio.com/meals.json\");case 5:response=_context.sent;if(response.ok){_context.next=8;break;}throw new Error(\"Something went wrong!\");case 8:_context.next=10;return response.json();case 10:data=_context.sent;loaded=[];for(key in data){loaded.push({id:key,name:data[key].name,description:data[key].description,price:data[key].price});}setLoadedMeals(loaded);_context.next=20;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](2);setIsLoading(false);setError(_context.t0.message);case 20:setIsLoading(false);case 21:case\"end\":return _context.stop();}}},_callee,null,[[2,16]]);})),[]);useEffect(function(){fetchmealsHandler();},[fetchmealsHandler]);var listOfMealS=loadedMeals.map(function(meal){return/*#__PURE__*/_jsx(MealItem,{id:meal.id,name:meal.name,description:meal.description,price:meal.price},meal.id);});return/*#__PURE__*/_jsx(\"div\",{className:classes.meals,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(\"ul\",{children:[isLoading&&!error?/*#__PURE__*/_jsx(\"p\",{children:\"THE MEALS ARE COMING!\"}):listOfMealS,error&&/*#__PURE__*/_jsx(\"p\",{children:error})]})})});};export default AvailableMeal;","map":{"version":3,"names":["React","useState","useEffect","useCallback","classes","MealItem","Card","AvailableMeal","loadedMeals","setLoadedMeals","isLoading","setIsLoading","error","setError","fetchmealsHandler","fetch","response","ok","Error","json","data","loaded","key","push","id","name","description","price","message","listOfMealS","map","meal","meals"],"sources":["C:/Users/HABEEB SHOLANKE/Desktop/foodapp/src/component/meal/AvailableMeal.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\r\nimport classes from \"./AvailableMeal.module.css\";\r\nimport MealItem from \"./MealItem\";\r\nimport Card from \"../UI/Card\";\r\n\r\nconst AvailableMeal = () => {\r\n  const [loadedMeals, setLoadedMeals] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState();\r\n\r\n  const fetchmealsHandler = useCallback(async () => {\r\n    setIsLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await fetch(\r\n        \"https://foods-5725b-default-rtdb.firebaseio.com/meals.json\"\r\n      );\r\n      if (!response.ok) {\r\n        throw new Error(\"Something went wrong!\");\r\n      }\r\n\r\n      const data = await response.json();\r\n\r\n      const loaded = [];\r\n\r\n      for (const key in data) {\r\n        loaded.push({\r\n          id: key,\r\n          name: data[key].name,\r\n          description: data[key].description,\r\n          price: data[key].price,\r\n        });\r\n      }\r\n\r\n      setLoadedMeals(loaded);\r\n    } catch (error) {\r\n      setIsLoading(false);\r\n      setError(error.message);\r\n    }\r\n    setIsLoading(false);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchmealsHandler();\r\n  }, [fetchmealsHandler]);\r\n\r\n  const listOfMealS = loadedMeals.map((meal) => (\r\n    <MealItem\r\n      id={meal.id}\r\n      key={meal.id}\r\n      name={meal.name}\r\n      description={meal.description}\r\n      price={meal.price}\r\n    ></MealItem>\r\n  ));\r\n\r\n  return (\r\n    <div className={classes.meals}>\r\n      <Card>\r\n        <ul>\r\n          {isLoading && !error ? <p>THE MEALS ARE COMING!</p> : listOfMealS}\r\n          {error && <p>{error}</p>}\r\n        </ul>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AvailableMeal;\r\n"],"mappings":"0YAAA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CAC/D,MAAOC,QAAO,KAAM,4BAA4B,CAChD,MAAOC,SAAQ,KAAM,YAAY,CACjC,MAAOC,KAAI,KAAM,YAAY,CAAC,wFAE9B,GAAMC,cAAa,CAAG,QAAhBA,cAAa,EAAS,CAC1B,cAAsCN,QAAQ,CAAC,EAAE,CAAC,wCAA3CO,WAAW,eAAEC,cAAc,eAClC,eAAkCR,QAAQ,CAAC,KAAK,CAAC,yCAA1CS,SAAS,eAAEC,YAAY,eAC9B,eAA0BV,QAAQ,EAAE,yCAA7BW,KAAK,eAAEC,QAAQ,eAEtB,GAAMC,kBAAiB,CAAGX,WAAW,wEAAC,kKACpCQ,YAAY,CAAC,IAAI,CAAC,CAClBE,QAAQ,CAAC,IAAI,CAAC,CAAC,sCAEUE,MAAK,CAC1B,4DAA4D,CAC7D,QAFKC,QAAQ,kBAGTA,QAAQ,CAACC,EAAE,8BACR,IAAIC,MAAK,CAAC,uBAAuB,CAAC,+BAGvBF,SAAQ,CAACG,IAAI,EAAE,SAA5BC,IAAI,eAEJC,MAAM,CAAG,EAAE,CAEjB,IAAWC,GAAG,GAAIF,KAAI,CAAE,CACtBC,MAAM,CAACE,IAAI,CAAC,CACVC,EAAE,CAAEF,GAAG,CACPG,IAAI,CAAEL,IAAI,CAACE,GAAG,CAAC,CAACG,IAAI,CACpBC,WAAW,CAAEN,IAAI,CAACE,GAAG,CAAC,CAACI,WAAW,CAClCC,KAAK,CAAEP,IAAI,CAACE,GAAG,CAAC,CAACK,KACnB,CAAC,CAAC,CACJ,CAEAlB,cAAc,CAACY,MAAM,CAAC,CAAC,iFAEvBV,YAAY,CAAC,KAAK,CAAC,CACnBE,QAAQ,CAAC,YAAMe,OAAO,CAAC,CAAC,QAE1BjB,YAAY,CAAC,KAAK,CAAC,CAAC,qEACrB,GAAE,EAAE,CAAC,CAENT,SAAS,CAAC,UAAM,CACdY,iBAAiB,EAAE,CACrB,CAAC,CAAE,CAACA,iBAAiB,CAAC,CAAC,CAEvB,GAAMe,YAAW,CAAGrB,WAAW,CAACsB,GAAG,CAAC,SAACC,IAAI,qBACvC,KAAC,QAAQ,EACP,EAAE,CAAEA,IAAI,CAACP,EAAG,CAEZ,IAAI,CAAEO,IAAI,CAACN,IAAK,CAChB,WAAW,CAAEM,IAAI,CAACL,WAAY,CAC9B,KAAK,CAAEK,IAAI,CAACJ,KAAM,EAHbI,IAAI,CAACP,EAAE,CAIF,EACb,CAAC,CAEF,mBACE,YAAK,SAAS,CAAEpB,OAAO,CAAC4B,KAAM,uBAC5B,KAAC,IAAI,wBACH,sBACGtB,SAAS,EAAI,CAACE,KAAK,cAAG,4CAA4B,CAAGiB,WAAW,CAChEjB,KAAK,eAAI,mBAAIA,KAAK,EAAK,GACrB,EACA,EACH,CAEV,CAAC,CAED,cAAeL,cAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}