{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/HABEEB SHOLANKE/Desktop/foodapp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/HABEEB SHOLANKE/Desktop/foodapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"C:/Users/HABEEB SHOLANKE/Desktop/foodapp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/HABEEB SHOLANKE/Desktop/foodapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import classes from\"./Cart.module.css\";import CartItem from\"./CartItem\";import Modal from\"../UI/Modal/Modal\";import{useDispatch,useSelector}from\"react-redux\";import{uiSliceAction}from\"../../store/uiSlice\";import{cartSliceAction}from\"../../store/cartSlice\";import Checkout from\"./Checkout\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Cart=function Cart(){var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isCheckOut=_useState2[0],setIsCheckOut=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isSubmitting=_useState4[0],setIsSubmitting=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isSubmitted=_useState6[0],setIsSubmitted=_useState6[1];var items=useSelector(function(state){return state.cart.items;});var totalAmount=useSelector(function(state){return state.cart.totalAmount;});var updatedTotalAmt=\"$\".concat(totalAmount.toFixed(2));var cartHasItem=items.length>0;var cartCloseHandler=function cartCloseHandler(){dispatch(uiSliceAction.closeCartHandler());};var onAddHandler=function onAddHandler(item){dispatch(cartSliceAction.addItemHandler(_objectSpread(_objectSpread({},item),{},{amount:1})));};var onRemoveHandler=function onRemoveHandler(id){dispatch(cartSliceAction.removeItemhandler(id));};var onHandleOrder=function onHandleOrder(){setIsCheckOut(true);};var onHandleCancel=function onHandleCancel(){setIsCheckOut(false);};var onPostHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(userData){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsSubmitting(true);_context.next=3;return fetch(\"https://food-http-de367-default-rtdb.firebaseio.com/orders.json\",{method:\"POST\",body:JSON.stringify({customer:userData,order:items})});case 3:setIsSubmitting(false);setIsSubmitted(true);dispatch(cartSliceAction.clearCartHandler());case 6:case\"end\":return _context.stop();}}},_callee);}));return function onPostHandler(_x){return _ref.apply(this,arguments);};}();var cart=/*#__PURE__*/_jsx(\"ul\",{className:classes[\"cart-items\"],children:items.map(function(item){return/*#__PURE__*/_jsx(CartItem,{name:item.name,amount:item.amount,price:item.price,onRemove:onRemoveHandler.bind(null,item.id),onAdd:onAddHandler.bind(null,item)},item.id);})});var cartContent=/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{children:!cartHasItem?/*#__PURE__*/_jsx(\"p\",{children:\"CART EMPTY\"}):cart}),/*#__PURE__*/_jsxs(\"div\",{className:classes.total,children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total Amount\"}),/*#__PURE__*/_jsx(\"span\",{children:updatedTotalAmt})]}),isCheckOut&&/*#__PURE__*/_jsx(Checkout,{onConfirm:onPostHandler,onCancel:onHandleCancel}),!isCheckOut&&/*#__PURE__*/_jsxs(\"div\",{className:classes.actions,children:[/*#__PURE__*/_jsx(\"button\",{className:classes[\"button--alt\"],type:\"button\",onClick:cartCloseHandler,children:\"close\"}),cartHasItem&&/*#__PURE__*/_jsx(\"button\",{className:classes.button,onClick:onHandleOrder,children:\"order\"})]})]});var submitting=/*#__PURE__*/_jsx(\"p\",{children:\"SUBMITTING ORDER!!\"});var submitted=/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{children:\"GREAT DELIOUS DELICACY ON ITS WAY TO YOU!!\"}),/*#__PURE__*/_jsx(\"div\",{className:classes.actions,children:/*#__PURE__*/_jsx(\"button\",{className:classes[\"button--alt\"],type:\"button\",onClick:cartCloseHandler,children:\"close\"})})]});return/*#__PURE__*/_jsxs(Modal,{onClick:cartCloseHandler,children:[isSubmitting&&submitting,isSubmitted&&submitted,!isSubmitting&&!isSubmitted&&cartContent]});};export default Cart;","map":{"version":3,"names":["React","useState","classes","CartItem","Modal","useDispatch","useSelector","uiSliceAction","cartSliceAction","Checkout","Cart","dispatch","isCheckOut","setIsCheckOut","isSubmitting","setIsSubmitting","isSubmitted","setIsSubmitted","items","state","cart","totalAmount","updatedTotalAmt","toFixed","cartHasItem","length","cartCloseHandler","closeCartHandler","onAddHandler","item","addItemHandler","amount","onRemoveHandler","id","removeItemhandler","onHandleOrder","onHandleCancel","onPostHandler","userData","fetch","method","body","JSON","stringify","customer","order","clearCartHandler","map","name","price","bind","cartContent","total","actions","button","submitting","submitted"],"sources":["C:/Users/HABEEB SHOLANKE/Desktop/foodapp/src/component/cart/Cart.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport classes from \"./Cart.module.css\";\r\nimport CartItem from \"./CartItem\";\r\nimport Modal from \"../UI/Modal/Modal\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { uiSliceAction } from \"../../store/uiSlice\";\r\nimport { cartSliceAction } from \"../../store/cartSlice\";\r\nimport Checkout from \"./Checkout\";\r\n\r\nconst Cart = () => {\r\n  const dispatch = useDispatch();\r\n  const [isCheckOut, setIsCheckOut] = useState(false);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [isSubmitted, setIsSubmitted] = useState(false);\r\n  const items = useSelector((state) => state.cart.items);\r\n  const totalAmount = useSelector((state) => state.cart.totalAmount);\r\n\r\n  const updatedTotalAmt = `$${totalAmount.toFixed(2)}`;\r\n\r\n  const cartHasItem = items.length > 0;\r\n\r\n  const cartCloseHandler = () => {\r\n    dispatch(uiSliceAction.closeCartHandler());\r\n  };\r\n\r\n  const onAddHandler = (item) => {\r\n    dispatch(cartSliceAction.addItemHandler({ ...item, amount: 1 }));\r\n  };\r\n\r\n  const onRemoveHandler = (id) => {\r\n    dispatch(cartSliceAction.removeItemhandler(id));\r\n  };\r\n\r\n  const onHandleOrder = () => {\r\n    setIsCheckOut(true);\r\n  };\r\n\r\n  const onHandleCancel = () => {\r\n    setIsCheckOut(false);\r\n  };\r\n\r\n  const onPostHandler = async (userData) => {\r\n    setIsSubmitting(true);\r\n    await fetch(\r\n      \"https://food-http-de367-default-rtdb.firebaseio.com/orders.json\",\r\n      {\r\n        method: \"POST\",\r\n        body: JSON.stringify({ customer: userData, order: items }),\r\n      }\r\n    );\r\n    setIsSubmitting(false);\r\n    setIsSubmitted(true);\r\n    dispatch(cartSliceAction.clearCartHandler());\r\n  };\r\n\r\n  const cart = (\r\n    <ul className={classes[\"cart-items\"]}>\r\n      {items.map((item) => (\r\n        <CartItem\r\n          key={item.id}\r\n          name={item.name}\r\n          amount={item.amount}\r\n          price={item.price}\r\n          onRemove={onRemoveHandler.bind(null, item.id)}\r\n          onAdd={onAddHandler.bind(null, item)}\r\n        />\r\n      ))}\r\n    </ul>\r\n  );\r\n\r\n  const cartContent = (\r\n    <React.Fragment>\r\n      <div>{!cartHasItem ? <p>CART EMPTY</p> : cart}</div>\r\n      <div className={classes.total}>\r\n        <span>Total Amount</span>\r\n        <span>{updatedTotalAmt}</span>\r\n      </div>\r\n      {isCheckOut && (\r\n        <Checkout onConfirm={onPostHandler} onCancel={onHandleCancel} />\r\n      )}\r\n      {!isCheckOut && (\r\n        <div className={classes.actions}>\r\n          <button\r\n            className={classes[\"button--alt\"]}\r\n            type=\"button\"\r\n            onClick={cartCloseHandler}\r\n          >\r\n            close\r\n          </button>\r\n          {cartHasItem && (\r\n            <button className={classes.button} onClick={onHandleOrder}>\r\n              order\r\n            </button>\r\n          )}\r\n        </div>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n\r\n  const submitting = <p>SUBMITTING ORDER!!</p>;\r\n  const submitted = (\r\n    <React.Fragment>\r\n      <p>GREAT DELIOUS DELICACY ON ITS WAY TO YOU!!</p>\r\n      <div className={classes.actions}>\r\n        <button\r\n          className={classes[\"button--alt\"]}\r\n          type=\"button\"\r\n          onClick={cartCloseHandler}\r\n        >\r\n          close\r\n        </button>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n\r\n  return (\r\n    <Modal onClick={cartCloseHandler}>\r\n      {isSubmitting && submitting}\r\n      {isSubmitted && submitted}\r\n      {!isSubmitting && !isSubmitted && cartContent}\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default Cart;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}