{"ast":null,"code":"import _slicedToArray from\"C:/Users/HABEEB SHOLANKE/Desktop/foodapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _toConsumableArray from\"C:/Users/HABEEB SHOLANKE/Desktop/foodapp/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"C:/Users/HABEEB SHOLANKE/Desktop/foodapp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useReducer}from\"react\";import cartContext from\"./CartContext\";import{jsx as _jsx}from\"react/jsx-runtime\";var defaultCartState={items:[],totalAmount:0};var CartReducer=function CartReducer(state,action){if(action.type===\"ADD\"){var updateTotalAmount=state.totalAmount+action.item.price*action.item.amount;var existingCartItemIndex=state.items.findIndex(function(item){return item.id===action.item.id;});var existingCartItem=state.items[existingCartItemIndex];var updateCartItems;if(existingCartItem){var updateItemAmt=_objectSpread(_objectSpread({},existingCartItem),{},{amount:existingCartItem.amount+action.item.amount});updateCartItems=_toConsumableArray(state.items);updateCartItems[existingCartItemIndex]=updateItemAmt;}else{updateCartItems=state.items.concat(action.item);}return{items:updateCartItems,totalAmount:updateTotalAmount};}if(action.type===\"REMOVE\"){var _existingCartItemIndex=state.items.findIndex(function(item){return item.id===action.id;});var _existingCartItem=state.items[_existingCartItemIndex];var _updateTotalAmount=state.totalAmount-_existingCartItem.price;var _updateCartItems;if(_existingCartItem.amount===1){_updateCartItems=state.items.filter(function(item){return item.id!==action.id;});}else{var _updateItemAmt=_objectSpread(_objectSpread({},_existingCartItem),{},{amount:_existingCartItem.amount-1});_updateCartItems=_toConsumableArray(state.items);_updateCartItems[_existingCartItemIndex]=_updateItemAmt;}return{items:_updateCartItems,totalAmount:_updateTotalAmount};}return defaultCartState;};var CartContextProvider=function CartContextProvider(props){var _useReducer=useReducer(CartReducer,defaultCartState),_useReducer2=_slicedToArray(_useReducer,2),cartState=_useReducer2[0],dispatchCartAction=_useReducer2[1];var addItemHandler=function addItemHandler(item){dispatchCartAction({type:\"ADD\",item:item});};var removeItemHandler=function removeItemHandler(id){dispatchCartAction({type:\"REMOVE\",id:id});};var cartContextContent={items:cartState.items,totalAmount:cartState.totalAmount,addItem:addItemHandler,removeItem:removeItemHandler};return/*#__PURE__*/_jsx(cartContext.Provider,{value:cartContextContent,children:props.children});};export default CartContextProvider;","map":{"version":3,"names":["React","useReducer","cartContext","defaultCartState","items","totalAmount","CartReducer","state","action","type","updateTotalAmount","item","price","amount","existingCartItemIndex","findIndex","id","existingCartItem","updateCartItems","updateItemAmt","concat","filter","CartContextProvider","props","cartState","dispatchCartAction","addItemHandler","removeItemHandler","cartContextContent","addItem","removeItem","children"],"sources":["C:/Users/HABEEB SHOLANKE/Desktop/foodapp/src/store/CartContextProvider.js"],"sourcesContent":["import React, { useReducer } from \"react\";\r\nimport cartContext from \"./CartContext\";\r\n\r\nconst defaultCartState = {\r\n  items: [],\r\n  totalAmount: 0,\r\n};\r\n\r\nconst CartReducer = (state, action) => {\r\n  if (action.type === \"ADD\") {\r\n    const updateTotalAmount =\r\n      state.totalAmount + action.item.price * action.item.amount;\r\n\r\n    const existingCartItemIndex = state.items.findIndex(\r\n      (item) => item.id === action.item.id\r\n    );\r\n    const existingCartItem = state.items[existingCartItemIndex];\r\n    let updateCartItems;\r\n\r\n    if (existingCartItem) {\r\n      const updateItemAmt = {\r\n        ...existingCartItem,\r\n        amount: existingCartItem.amount + action.item.amount,\r\n      };\r\n      updateCartItems = [...state.items];\r\n      updateCartItems[existingCartItemIndex] = updateItemAmt;\r\n    } else {\r\n      updateCartItems = state.items.concat(action.item);\r\n    }\r\n\r\n    return {\r\n      items: updateCartItems,\r\n      totalAmount: updateTotalAmount,\r\n    };\r\n  }\r\n  if (action.type === \"REMOVE\") {\r\n    const existingCartItemIndex = state.items.findIndex(\r\n      (item) => item.id === action.id\r\n    );\r\n    const existingCartItem = state.items[existingCartItemIndex];\r\n    const updateTotalAmount = state.totalAmount - existingCartItem.price;\r\n    let updateCartItems;\r\n    if (existingCartItem.amount === 1) {\r\n      updateCartItems = state.items.filter((item) => item.id !== action.id);\r\n    } else {\r\n      const updateItemAmt = {\r\n        ...existingCartItem,\r\n        amount: existingCartItem.amount - 1,\r\n      };\r\n      updateCartItems = [...state.items];\r\n      updateCartItems[existingCartItemIndex] = updateItemAmt;\r\n    }\r\n    return {\r\n      items: updateCartItems,\r\n      totalAmount: updateTotalAmount,\r\n    };\r\n  }\r\n  return defaultCartState;\r\n};\r\n\r\nconst CartContextProvider = (props) => {\r\n  const [cartState, dispatchCartAction] = useReducer(\r\n    CartReducer,\r\n    defaultCartState\r\n  );\r\n\r\n  const addItemHandler = (item) => {\r\n    dispatchCartAction({ type: \"ADD\", item: item });\r\n  };\r\n\r\n  const removeItemHandler = (id) => {\r\n    dispatchCartAction({ type: \"REMOVE\", id: id });\r\n  };\r\n\r\n  const cartContextContent = {\r\n    items: cartState.items,\r\n    totalAmount: cartState.totalAmount,\r\n    addItem: addItemHandler,\r\n    removeItem: removeItemHandler,\r\n  };\r\n\r\n  return (\r\n    <cartContext.Provider value={cartContextContent}>\r\n      {props.children}\r\n    </cartContext.Provider>\r\n  );\r\n};\r\n\r\nexport default CartContextProvider;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}