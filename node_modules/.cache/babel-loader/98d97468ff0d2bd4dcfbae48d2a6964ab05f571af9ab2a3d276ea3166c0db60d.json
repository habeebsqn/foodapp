{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/HABEEB SHOLANKE/Desktop/foodapp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/HABEEB SHOLANKE/Desktop/foodapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"C:/Users/HABEEB SHOLANKE/Desktop/foodapp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/HABEEB SHOLANKE/Desktop/foodapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState}from\"react\";import classes from\"./Cart.module.css\";import CartItem from\"./CartItem\";import Modal from\"../UI/Modal/Modal\";import cartContext from\"../../store/CartContext\";import Checkout from\"./Checkout\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Cart=function Cart(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isCheckOut=_useState2[0],setIsCheckOut=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isSubmitting=_useState4[0],setIsSubmitting=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isSubmitted=_useState6[0],setIsSubmitted=_useState6[1];var cartCtx=useContext(cartContext);var updatedTotalAmt=\"$\".concat(cartCtx.totalAmount.toFixed(2));var cartHasItem=cartCtx.items.length>0;var onAddHandler=function onAddHandler(item){cartCtx.addItem(_objectSpread(_objectSpread({},item),{},{amount:1}));};var onRemoveHandler=function onRemoveHandler(id){cartCtx.removeItem(id);};var onHandleOrder=function onHandleOrder(){setIsCheckOut(true);};var onHandleCancel=function onHandleCancel(){setIsCheckOut(false);};var onPostHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(userData){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsSubmitting(true);_context.next=3;return fetch(\"https://foods-5725b-default-rtdb.firebaseio.com/orders.json\",{method:\"POST\",body:JSON.stringify({customer:userData,orders:cartCtx.items})});case 3:setIsSubmitting(false);setIsSubmitted(true);cartCtx.clearCart();case 6:case\"end\":return _context.stop();}}},_callee);}));return function onPostHandler(_x){return _ref.apply(this,arguments);};}();var cart=/*#__PURE__*/_jsx(\"ul\",{className:classes[\"cart-items\"],children:cartCtx.items.map(function(item){return/*#__PURE__*/_jsx(CartItem,{name:item.name,amount:item.amount,price:item.price,onRemove:onRemoveHandler.bind(null,item.id),onAdd:onAddHandler.bind(null,item)},item.id);})});var cartContent=/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{children:!cartHasItem?/*#__PURE__*/_jsx(\"p\",{children:\"CART EMPTY\"}):cart}),/*#__PURE__*/_jsxs(\"div\",{className:classes.total,children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total Amount\"}),/*#__PURE__*/_jsx(\"span\",{children:updatedTotalAmt})]}),isCheckOut&&/*#__PURE__*/_jsx(Checkout,{onConfirm:onPostHandler,onCancel:onHandleCancel}),!isCheckOut&&/*#__PURE__*/_jsxs(\"div\",{className:classes.actions,children:[/*#__PURE__*/_jsx(\"button\",{className:classes[\"button--alt\"],type:\"button\",onClick:props.onClick,children:\"close\"}),cartHasItem&&/*#__PURE__*/_jsx(\"button\",{className:classes.button,onClick:onHandleOrder,children:\"order\"})]})]});var submitting=/*#__PURE__*/_jsx(\"p\",{children:\"SUBMITTING ORDER!!\"});var submitted=/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{children:\"GREAT DELIOUS DELICACY ON ITS WAY TO YOU!!\"}),/*#__PURE__*/_jsx(\"div\",{className:classes.actions,children:/*#__PURE__*/_jsx(\"button\",{className:classes[\"button--alt\"],type:\"button\",onClick:props.onClick,children:\"close\"})})]});return/*#__PURE__*/_jsxs(Modal,{onClick:props.onClick,children:[isSubmitting&&submitting,isSubmitted&&submitted,!isSubmitting&&!isSubmitted&&cartContent]});};export default Cart;","map":{"version":3,"names":["React","useContext","useState","classes","CartItem","Modal","cartContext","Checkout","Cart","props","isCheckOut","setIsCheckOut","isSubmitting","setIsSubmitting","isSubmitted","setIsSubmitted","cartCtx","updatedTotalAmt","totalAmount","toFixed","cartHasItem","items","length","onAddHandler","item","addItem","amount","onRemoveHandler","id","removeItem","onHandleOrder","onHandleCancel","onPostHandler","userData","fetch","method","body","JSON","stringify","customer","orders","clearCart","cart","map","name","price","bind","cartContent","total","actions","onClick","button","submitting","submitted"],"sources":["C:/Users/HABEEB SHOLANKE/Desktop/foodapp/src/component/cart/Cart.js"],"sourcesContent":["import React, { useContext, useState } from \"react\";\r\nimport classes from \"./Cart.module.css\";\r\nimport CartItem from \"./CartItem\";\r\nimport Modal from \"../UI/Modal/Modal\";\r\nimport cartContext from \"../../store/CartContext\";\r\nimport Checkout from \"./Checkout\";\r\nconst Cart = (props) => {\r\n  const [isCheckOut, setIsCheckOut] = useState(false);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [isSubmitted, setIsSubmitted] = useState(false);\r\n  const cartCtx = useContext(cartContext);\r\n\r\n  const updatedTotalAmt = `$${cartCtx.totalAmount.toFixed(2)}`;\r\n\r\n  const cartHasItem = cartCtx.items.length > 0;\r\n\r\n  const onAddHandler = (item) => {\r\n    cartCtx.addItem({ ...item, amount: 1 });\r\n  };\r\n\r\n  const onRemoveHandler = (id) => {\r\n    cartCtx.removeItem(id);\r\n  };\r\n\r\n  const onHandleOrder = () => {\r\n    setIsCheckOut(true);\r\n  };\r\n\r\n  const onHandleCancel = () => {\r\n    setIsCheckOut(false);\r\n  };\r\n\r\n  const onPostHandler = async (userData) => {\r\n    setIsSubmitting(true);\r\n    await fetch(\"https://foods-5725b-default-rtdb.firebaseio.com/orders.json\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify({ customer: userData, orders: cartCtx.items }),\r\n    });\r\n    setIsSubmitting(false);\r\n    setIsSubmitted(true);\r\n    cartCtx.clearCart();\r\n  };\r\n\r\n  const cart = (\r\n    <ul className={classes[\"cart-items\"]}>\r\n      {cartCtx.items.map((item) => (\r\n        <CartItem\r\n          key={item.id}\r\n          name={item.name}\r\n          amount={item.amount}\r\n          price={item.price}\r\n          onRemove={onRemoveHandler.bind(null, item.id)}\r\n          onAdd={onAddHandler.bind(null, item)}\r\n        />\r\n      ))}\r\n    </ul>\r\n  );\r\n\r\n  const cartContent = (\r\n    <React.Fragment>\r\n      <div>{!cartHasItem ? <p>CART EMPTY</p> : cart}</div>\r\n      <div className={classes.total}>\r\n        <span>Total Amount</span>\r\n        <span>{updatedTotalAmt}</span>\r\n      </div>\r\n      {isCheckOut && (\r\n        <Checkout onConfirm={onPostHandler} onCancel={onHandleCancel} />\r\n      )}\r\n      {!isCheckOut && (\r\n        <div className={classes.actions}>\r\n          <button\r\n            className={classes[\"button--alt\"]}\r\n            type=\"button\"\r\n            onClick={props.onClick}\r\n          >\r\n            close\r\n          </button>\r\n          {cartHasItem && (\r\n            <button className={classes.button} onClick={onHandleOrder}>\r\n              order\r\n            </button>\r\n          )}\r\n        </div>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n\r\n  const submitting = <p>SUBMITTING ORDER!!</p>;\r\n  const submitted = (\r\n    <React.Fragment>\r\n      <p>GREAT DELIOUS DELICACY ON ITS WAY TO YOU!!</p>\r\n      <div className={classes.actions}>\r\n        <button\r\n          className={classes[\"button--alt\"]}\r\n          type=\"button\"\r\n          onClick={props.onClick}\r\n        >\r\n          close\r\n        </button>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n  return (\r\n    <Modal onClick={props.onClick}>\r\n      {isSubmitting && submitting}\r\n      {isSubmitted && submitted}\r\n      {!isSubmitting && !isSubmitted && cartContent}\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default Cart;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}